@go.Package { name = "github.com/kdeps/schema/gen/env" }

module org.kdeps.pkl.Env

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.5.0#/go.pkl"

hidden envStringRegex = Regex(#"^[a-zA-Z_]\w*$"#)

hidden isValidEnv = (str) ->
  if (str.matches(envStringRegex))
    true
  else
    throw("Error: Invalid env name: The env name contains invalid characters. Please ensure it only includes alphanumeric characters (letters and numbers), does not start with a number, and is not empty.")

resourceEnv: Mapping<String, ResourceEnv>?
env: Mapping<String(isValidEnv), String>?

class ResourceEnv {
  hidden envStringRegex = Regex(#"^[a-zA-Z_]\w*$"#)

  hidden isValidEnv = (str) ->
    if (str.matches(envStringRegex))
      true
    else
      throw("Error: Invalid env name: The env name contains invalid characters. Please ensure it only includes alphanumeric characters (letters and numbers), does not start with a number, and is not empty.")

  name: String(isValidEnv)
  value: String
}
